{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"What is ddns-route53? \u00b6 ddns-route53 is a CLI application written in Go and delivered as a single executable (and a Docker image ) that lets you run your own dynamic DNS service with Amazon Route 53 on a time-based schedule. With Go, this can be done with an independent binary distribution across all platforms and architectures that Go supports. This support includes Linux, macOS, and Windows, on architectures like amd64, 386, ARM, PowerPC, and others. Features \u00b6 Handle IPv4 and IPv6 addresses Internal cron implementation through go routines License \u00b6 This project is licensed under the terms of the MIT license.","title":"Home"},{"location":"#what-is-ddns-route53","text":"ddns-route53 is a CLI application written in Go and delivered as a single executable (and a Docker image ) that lets you run your own dynamic DNS service with Amazon Route 53 on a time-based schedule. With Go, this can be done with an independent binary distribution across all platforms and architectures that Go supports. This support includes Linux, macOS, and Windows, on architectures like amd64, 386, ARM, PowerPC, and others.","title":"What is ddns-route53?"},{"location":"#features","text":"Handle IPv4 and IPv6 addresses Internal cron implementation through go routines","title":"Features"},{"location":"#license","text":"This project is licensed under the terms of the MIT license.","title":"License"},{"location":"changelog/","text":"Changelog \u00b6 2.8.0 (2022/01/26) \u00b6 Alpine Linux 3.15 (#622) MkDocs Material 8.1.8 (#637) goreleaser-xx 1.2.5 (#627) Move syscall to golang.org/x/sys (#612) Move from io/ioutil to io and os packages (#613) Enhance dockerfiles (#610 #611) Bump github.com/go-playground/validator/v10 from 10.9.0 to 10.10.0 (#614) Bump github.com/alecthomas/kong from 0.2.17 to 0.3.0 (#576 #599 #605 #620) Bump github.com/aws/aws-sdk-go from 1.40.37 to 1.42.41 (#551 #577 #615 #623 #636) Bump github.com/rs/zerolog from 1.24.0 to 1.26.1 (#534 #574 #607) 2.7.0 (2021/09/05) \u00b6 Go 1.17 (#519) Add windows/arm64 artifact Wrong remaining time displayed Bump github.com/aws/aws-sdk-go from 1.38.69 to 1.40.37 (#518 #531) Bump github.com/rs/zerolog from 1.23.0 to 1.24.0 (#525) Bump github.com/crazy-max/gonfig from 0.4.0 to 0.5.0 (#520) Bump codecov/codecov-action from 1 to 2 Bump github.com/go-playground/validator/v10 from 10.6.1 to 10.9.0 (#483 #508) Corrected Unifi documentation (#477) 2.6.1 (2021/06/29) \u00b6 windows/arm64 not yet available 2.6.0 (2021/06/29) \u00b6 Bump github.com/aws/aws-sdk-go from 1.38.55 to 1.38.69 (#472) Add linux/riscv64 and windows/arm64 artifacts (#475) Alpine Linux 3.14 (#474) Added quotations to linux service (#473) Bump github.com/rs/zerolog from 1.22.0 to 1.23.0 (#463) Bump github.com/alecthomas/kong from 0.2.16 to 0.2.17 (#457) 2.5.0 (2021/06/05) \u00b6 Bump github.com/go-playground/validator/v10 from 10.4.1 to 10.6.1 (#435) Allow disabling log color output (#456) Update build workflow (#455) Add cni installation to unifi-os install (#438) MkDocs Materials 7.1.5 (#453) Fix artifacts download links Set cacheonly output for validators Move to docker/metadata-action Add darwin/arm64 artifact Deploy docs on workflow dispatch or tag Bump github.com/rs/zerolog from 1.20.0 to 1.22.0 (#388 #437) Go 1.16 (#390) Bump github.com/aws/aws-sdk-go from 1.37.25 to 1.38.55 (#377 #391 #454) Bump github.com/alecthomas/kong from 0.2.15 to 0.2.16 (#376) 2.4.0 (2021/03/07) \u00b6 Bump github.com/aws/aws-sdk-go from 1.36.20 to 1.37.25 (#374) Fix WanIP provider Missing non-root user for Docker image Switch to goreleaser-xx (#373) Remove s390x Docker image support (#361) Bump github.com/alecthomas/kong from 0.2.12 to 0.2.15 (#353) Bump github.com/stretchr/testify from 1.6.1 to 1.7.0 (#339) 2.3.0 (2021/01/05) \u00b6 Bump github.com/aws/aws-sdk-go from 1.35.28 to 1.36.20 (#332) Refactor CI and dev workflow with buildx bake (#333) Upload artifacts Add image-local target Single job for artifacts and image Add armv5 , ppc64le and s390x artifacts Handle multi IP providers (#331) Bump github.com/alecthomas/kong from 0.2.11 to 0.2.12 (#307) 2.2.0 (2020/11/15) \u00b6 Use embedded tzdata package Remove --timezone flag Docker image also available on GitHub Container Registry Switch to Docker actions Update deps 2.1.0 (2020/09/07) \u00b6 Don't fill record change if IP address not available (#224) Go 1.15 Update deps 2.0.1 (2020/08/05) \u00b6 Fix nil pointer with AWS credentials (#186) 2.0.0 (2020/07/22) \u00b6 See Migration notes in the documentation for breaking changes. Configuration transposed into environment variables AWS_HOSTED_ZONE_ID env var renamed DDNSR53_ROUTE53_HOSTEDZONEID Improve configuration validation All fields in configuration now camelCased Add tests and coverage Dockerfile enhanced Seek configuration file from default places Configuration file not required anymore Switch to gonfig Add fields to load sensitive values from file Handle AWS EnvProvider for credentials Docs website with mkdocs Update deps 1.10.1 (2020/06/19) \u00b6 Fix unpublished Docker image 1.10.0 (2020/06/19) \u00b6 Add support for mips architectures (#160) aws-sdk-go 1.32.1 Update deps 1.9.1 (2020/05/14) \u00b6 Typo 1.9.0 (2020/05/14) \u00b6 Allow using AWS_ACCESS_KEY_ID , AWS_SECRET_ACCESS_KEY and AWS_HOSTED_ZONE_ID environment variables (#130) Check AWS Route53 hosted zone ID entry aws-sdk-go 1.30.27 1.8.0 (2020/05/06) \u00b6 Add --log-caller flag Flag --log-json not handled aws-sdk-go 1.30.20 Update deps 1.7.0 (2020/04/06) \u00b6 Switch to kong command-line parser Use Open Container Specification labels as label-schema.org ones are deprecated aws-sdk-go 1.30.3 Update deps 1.6.0 (2019/12/20) \u00b6 Strengthen WAN IP address retrieval and validation Move ident.me client to pkg Add --max-retries flag aws-sdk-go 1.26.6 Update deps Go 1.13.5 1.5.0 (2019/11/11) \u00b6 Seconds field is now optional aws-sdk-go 1.25.31 Cache go modules 1.4.2 (2019/10/08) \u00b6 Allow both IPv4 and IPv6 records (#7) Use Docker buildx action v1 1.4.1 (2019/09/27) \u00b6 Build on respective platforms Update deps Go 1.12.10 1.4.0 (2019/09/26) \u00b6 Run Docker container as non-root user 1.3.4 (2019/09/22) \u00b6 Use GOPROXY Update workflow Use softprops/action-gh-release to create GitHub release Use ghaction-goreleaser GitHub Action Use ghaction-docker-buildx GitHub Action Stop publishing Docker image on Quay 1.3.3 (2019/09/08) \u00b6 Fix DockerHub latest tag 1.3.2 (2019/08/31) \u00b6 Reenable multi-platform Docker images (#4) 1.3.1 (2019/08/31) \u00b6 Remove multi-platform Docker image, need rework (#4) 1.3.0 (2019/08/31) \u00b6 Multi-platform Docker image (#4) Remove GitHub Package support 1.2.1 (2019/08/29) \u00b6 Push Docker image to GitHub Package 1.2.0 (2019/08/29) \u00b6 Switch to GitHub Actions 1.1.0 (2019/07/18) \u00b6 Display next execution time Use v3 robfig/cron Go 1.12.4 1.0.0 (2019/06/03) \u00b6 Run once on startup (#2) Update libs 0.2.0 (2019/04/02) \u00b6 Handle IPv4 or IPv6 only if included in a record set (#1) Update libs 0.1.1 (2019/04/02) \u00b6 Fix update of last IPv4/IPv6 0.1.0 (2019/04/01) \u00b6 Initial version based on aws-sdk-go 1.19.6","title":"Changelog"},{"location":"changelog/#changelog","text":"","title":"Changelog"},{"location":"changelog/#280-20220126","text":"Alpine Linux 3.15 (#622) MkDocs Material 8.1.8 (#637) goreleaser-xx 1.2.5 (#627) Move syscall to golang.org/x/sys (#612) Move from io/ioutil to io and os packages (#613) Enhance dockerfiles (#610 #611) Bump github.com/go-playground/validator/v10 from 10.9.0 to 10.10.0 (#614) Bump github.com/alecthomas/kong from 0.2.17 to 0.3.0 (#576 #599 #605 #620) Bump github.com/aws/aws-sdk-go from 1.40.37 to 1.42.41 (#551 #577 #615 #623 #636) Bump github.com/rs/zerolog from 1.24.0 to 1.26.1 (#534 #574 #607)","title":"2.8.0 (2022/01/26)"},{"location":"changelog/#270-20210905","text":"Go 1.17 (#519) Add windows/arm64 artifact Wrong remaining time displayed Bump github.com/aws/aws-sdk-go from 1.38.69 to 1.40.37 (#518 #531) Bump github.com/rs/zerolog from 1.23.0 to 1.24.0 (#525) Bump github.com/crazy-max/gonfig from 0.4.0 to 0.5.0 (#520) Bump codecov/codecov-action from 1 to 2 Bump github.com/go-playground/validator/v10 from 10.6.1 to 10.9.0 (#483 #508) Corrected Unifi documentation (#477)","title":"2.7.0 (2021/09/05)"},{"location":"changelog/#261-20210629","text":"windows/arm64 not yet available","title":"2.6.1 (2021/06/29)"},{"location":"changelog/#260-20210629","text":"Bump github.com/aws/aws-sdk-go from 1.38.55 to 1.38.69 (#472) Add linux/riscv64 and windows/arm64 artifacts (#475) Alpine Linux 3.14 (#474) Added quotations to linux service (#473) Bump github.com/rs/zerolog from 1.22.0 to 1.23.0 (#463) Bump github.com/alecthomas/kong from 0.2.16 to 0.2.17 (#457)","title":"2.6.0 (2021/06/29)"},{"location":"changelog/#250-20210605","text":"Bump github.com/go-playground/validator/v10 from 10.4.1 to 10.6.1 (#435) Allow disabling log color output (#456) Update build workflow (#455) Add cni installation to unifi-os install (#438) MkDocs Materials 7.1.5 (#453) Fix artifacts download links Set cacheonly output for validators Move to docker/metadata-action Add darwin/arm64 artifact Deploy docs on workflow dispatch or tag Bump github.com/rs/zerolog from 1.20.0 to 1.22.0 (#388 #437) Go 1.16 (#390) Bump github.com/aws/aws-sdk-go from 1.37.25 to 1.38.55 (#377 #391 #454) Bump github.com/alecthomas/kong from 0.2.15 to 0.2.16 (#376)","title":"2.5.0 (2021/06/05)"},{"location":"changelog/#240-20210307","text":"Bump github.com/aws/aws-sdk-go from 1.36.20 to 1.37.25 (#374) Fix WanIP provider Missing non-root user for Docker image Switch to goreleaser-xx (#373) Remove s390x Docker image support (#361) Bump github.com/alecthomas/kong from 0.2.12 to 0.2.15 (#353) Bump github.com/stretchr/testify from 1.6.1 to 1.7.0 (#339)","title":"2.4.0 (2021/03/07)"},{"location":"changelog/#230-20210105","text":"Bump github.com/aws/aws-sdk-go from 1.35.28 to 1.36.20 (#332) Refactor CI and dev workflow with buildx bake (#333) Upload artifacts Add image-local target Single job for artifacts and image Add armv5 , ppc64le and s390x artifacts Handle multi IP providers (#331) Bump github.com/alecthomas/kong from 0.2.11 to 0.2.12 (#307)","title":"2.3.0 (2021/01/05)"},{"location":"changelog/#220-20201115","text":"Use embedded tzdata package Remove --timezone flag Docker image also available on GitHub Container Registry Switch to Docker actions Update deps","title":"2.2.0 (2020/11/15)"},{"location":"changelog/#210-20200907","text":"Don't fill record change if IP address not available (#224) Go 1.15 Update deps","title":"2.1.0 (2020/09/07)"},{"location":"changelog/#201-20200805","text":"Fix nil pointer with AWS credentials (#186)","title":"2.0.1 (2020/08/05)"},{"location":"changelog/#200-20200722","text":"See Migration notes in the documentation for breaking changes. Configuration transposed into environment variables AWS_HOSTED_ZONE_ID env var renamed DDNSR53_ROUTE53_HOSTEDZONEID Improve configuration validation All fields in configuration now camelCased Add tests and coverage Dockerfile enhanced Seek configuration file from default places Configuration file not required anymore Switch to gonfig Add fields to load sensitive values from file Handle AWS EnvProvider for credentials Docs website with mkdocs Update deps","title":"2.0.0 (2020/07/22)"},{"location":"changelog/#1101-20200619","text":"Fix unpublished Docker image","title":"1.10.1 (2020/06/19)"},{"location":"changelog/#1100-20200619","text":"Add support for mips architectures (#160) aws-sdk-go 1.32.1 Update deps","title":"1.10.0 (2020/06/19)"},{"location":"changelog/#191-20200514","text":"Typo","title":"1.9.1 (2020/05/14)"},{"location":"changelog/#190-20200514","text":"Allow using AWS_ACCESS_KEY_ID , AWS_SECRET_ACCESS_KEY and AWS_HOSTED_ZONE_ID environment variables (#130) Check AWS Route53 hosted zone ID entry aws-sdk-go 1.30.27","title":"1.9.0 (2020/05/14)"},{"location":"changelog/#180-20200506","text":"Add --log-caller flag Flag --log-json not handled aws-sdk-go 1.30.20 Update deps","title":"1.8.0 (2020/05/06)"},{"location":"changelog/#170-20200406","text":"Switch to kong command-line parser Use Open Container Specification labels as label-schema.org ones are deprecated aws-sdk-go 1.30.3 Update deps","title":"1.7.0 (2020/04/06)"},{"location":"changelog/#160-20191220","text":"Strengthen WAN IP address retrieval and validation Move ident.me client to pkg Add --max-retries flag aws-sdk-go 1.26.6 Update deps Go 1.13.5","title":"1.6.0 (2019/12/20)"},{"location":"changelog/#150-20191111","text":"Seconds field is now optional aws-sdk-go 1.25.31 Cache go modules","title":"1.5.0 (2019/11/11)"},{"location":"changelog/#142-20191008","text":"Allow both IPv4 and IPv6 records (#7) Use Docker buildx action v1","title":"1.4.2 (2019/10/08)"},{"location":"changelog/#141-20190927","text":"Build on respective platforms Update deps Go 1.12.10","title":"1.4.1 (2019/09/27)"},{"location":"changelog/#140-20190926","text":"Run Docker container as non-root user","title":"1.4.0 (2019/09/26)"},{"location":"changelog/#134-20190922","text":"Use GOPROXY Update workflow Use softprops/action-gh-release to create GitHub release Use ghaction-goreleaser GitHub Action Use ghaction-docker-buildx GitHub Action Stop publishing Docker image on Quay","title":"1.3.4 (2019/09/22)"},{"location":"changelog/#133-20190908","text":"Fix DockerHub latest tag","title":"1.3.3 (2019/09/08)"},{"location":"changelog/#132-20190831","text":"Reenable multi-platform Docker images (#4)","title":"1.3.2 (2019/08/31)"},{"location":"changelog/#131-20190831","text":"Remove multi-platform Docker image, need rework (#4)","title":"1.3.1 (2019/08/31)"},{"location":"changelog/#130-20190831","text":"Multi-platform Docker image (#4) Remove GitHub Package support","title":"1.3.0 (2019/08/31)"},{"location":"changelog/#121-20190829","text":"Push Docker image to GitHub Package","title":"1.2.1 (2019/08/29)"},{"location":"changelog/#120-20190829","text":"Switch to GitHub Actions","title":"1.2.0 (2019/08/29)"},{"location":"changelog/#110-20190718","text":"Display next execution time Use v3 robfig/cron Go 1.12.4","title":"1.1.0 (2019/07/18)"},{"location":"changelog/#100-20190603","text":"Run once on startup (#2) Update libs","title":"1.0.0 (2019/06/03)"},{"location":"changelog/#020-20190402","text":"Handle IPv4 or IPv6 only if included in a record set (#1) Update libs","title":"0.2.0 (2019/04/02)"},{"location":"changelog/#011-20190402","text":"Fix update of last IPv4/IPv6","title":"0.1.1 (2019/04/02)"},{"location":"changelog/#010-20190401","text":"Initial version based on aws-sdk-go 1.19.6","title":"0.1.0 (2019/04/01)"},{"location":"contributing/","text":"Contributing \u00b6 Hi there! I'm thrilled that you'd like to contribute to this project. Your help is essential for keeping it great. Contributions to this project are released to the public under the project's open source license . Submitting a pull request \u00b6 Fork and clone the repository Configure and install the dependencies: go mod download Create a new branch: git checkout -b my-branch-name Make your changes Validate: docker buildx bake validate Test your code: docker buildx bake test Build the project: docker buildx bake artifact-all image-all Push to your fork and submit a pull request Pat your self on the back and wait for your pull request to be reviewed and merged. Here are a few things you can do that will increase the likelihood of your pull request being accepted: Make sure the README.md and any other relevant documentation are kept up-to-date . I try to follow SemVer v2.0.0 . Randomly breaking public APIs is not an option. Keep your change as focused as possible. If there are multiple changes you would like to make that are not dependent upon each other, consider submitting them as separate pull requests . Write a good commit message . Resources \u00b6 How to Contribute to Open Source Using Pull Requests GitHub Help","title":"Contributing"},{"location":"contributing/#contributing","text":"Hi there! I'm thrilled that you'd like to contribute to this project. Your help is essential for keeping it great. Contributions to this project are released to the public under the project's open source license .","title":"Contributing"},{"location":"contributing/#submitting-a-pull-request","text":"Fork and clone the repository Configure and install the dependencies: go mod download Create a new branch: git checkout -b my-branch-name Make your changes Validate: docker buildx bake validate Test your code: docker buildx bake test Build the project: docker buildx bake artifact-all image-all Push to your fork and submit a pull request Pat your self on the back and wait for your pull request to be reviewed and merged. Here are a few things you can do that will increase the likelihood of your pull request being accepted: Make sure the README.md and any other relevant documentation are kept up-to-date . I try to follow SemVer v2.0.0 . Randomly breaking public APIs is not an option. Keep your change as focused as possible. If there are multiple changes you would like to make that are not dependent upon each other, consider submitting them as separate pull requests . Write a good commit message .","title":"Submitting a pull request"},{"location":"contributing/#resources","text":"How to Contribute to Open Source Using Pull Requests GitHub Help","title":"Resources"},{"location":"donate/","text":"ddns-route53 is free and open source and always will be. All kinds of contributions are welcome! The most basic way to show your support is to star the project , or to raise issues. You can also support this project by becoming a sponsor on GitHub or by making a Paypal donation to ensure this journey continues indefinitely!","title":"Donate"},{"location":"faq/","text":"FAQ \u00b6 Timezone \u00b6 By default, all interpretation and scheduling is done with your local timezone ( TZ environment variable). Cron schedule may also override the timezone to be interpreted in by providing an additional space-separated field at the beginning of the cron spec, of the form CRON_TZ=<timezone> : ddns-route53 --schedule \"CRON_TZ=Asia/Tokyo */30 * * * *\"","title":"FAQ"},{"location":"faq/#faq","text":"","title":"FAQ"},{"location":"faq/#timezone","text":"By default, all interpretation and scheduling is done with your local timezone ( TZ environment variable). Cron schedule may also override the timezone to be interpreted in by providing an additional space-separated field at the beginning of the cron spec, of the form CRON_TZ=<timezone> : ddns-route53 --schedule \"CRON_TZ=Asia/Tokyo */30 * * * *\"","title":"Timezone"},{"location":"reporting-issue/","text":"Reporting an issue \u00b6 Before submitting an issue \u00b6 First, be a good guy . Please do a search in open issues to see if the issue or feature request has already been filed. If you find your issue already exists, make relevant comments and add your reaction . Use a reaction in place of a \"+1\" comment. - upvote - downvote If you cannot find an existing issue that describes your bug or feature, submit an issue using the guidelines below. Writing good bug reports and feature requests \u00b6 File a single issue per problem and feature request. Do not enumerate multiple bugs or feature requests in the same issue. Do not add your issue as a comment to an existing issue unless it's for the identical input. Many issues look similar, but have different causes. The more information you can provide, the more likely someone will be successful reproducing the issue and finding a fix. You are now ready to create a new issue ! Closure policy \u00b6 Issues that don't have the information requested above (when applicable) will be closed immediately and the poster directed to the support guidelines. Issues that go a week without a response from original poster are subject to closure at our discretion.","title":"Reporting an issue"},{"location":"reporting-issue/#reporting-an-issue","text":"","title":"Reporting an issue"},{"location":"reporting-issue/#before-submitting-an-issue","text":"First, be a good guy . Please do a search in open issues to see if the issue or feature request has already been filed. If you find your issue already exists, make relevant comments and add your reaction . Use a reaction in place of a \"+1\" comment. - upvote - downvote If you cannot find an existing issue that describes your bug or feature, submit an issue using the guidelines below.","title":"Before submitting an issue"},{"location":"reporting-issue/#writing-good-bug-reports-and-feature-requests","text":"File a single issue per problem and feature request. Do not enumerate multiple bugs or feature requests in the same issue. Do not add your issue as a comment to an existing issue unless it's for the identical input. Many issues look similar, but have different causes. The more information you can provide, the more likely someone will be successful reproducing the issue and finding a fix. You are now ready to create a new issue !","title":"Writing good bug reports and feature requests"},{"location":"reporting-issue/#closure-policy","text":"Issues that don't have the information requested above (when applicable) will be closed immediately and the poster directed to the support guidelines. Issues that go a week without a response from original poster are subject to closure at our discretion.","title":"Closure policy"},{"location":"config/","text":"Configuration \u00b6 Overview \u00b6 There are two different ways to define configuration in ddns-route53: In a configuration file As environment variables These ways are evaluated in the order listed above. If no value was provided for a given option, a default value applies. Moreover, if an option has sub-options, and any of these sub-options is not specified, a default value will apply as well. Configuration file \u00b6 At startup, ddns-route53 searches for a file named ddns-route53.yml (or ddns-route53.yaml ) in: /etc/ddns-route53/ $XDG_CONFIG_HOME/ $HOME/.config/ . (the working directory) You can override this using the --config flag or CONFIG env var . ddns-route53.yml credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hostedZoneID : \"ABCEEFG123456789\" recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 - name : \"ddns.example.com.\" type : \"AAAA\" ttl : 300 - name : \"another.example2.com.\" type : \"A\" ttl : 600 Environment variables \u00b6 All configuration from file can be transposed into environment variables. As an example, the following configuration: ddns-route53.yml credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hostedZoneID : \"ABCEEFG123456789\" recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 - name : \"ddns.example.com.\" type : \"AAAA\" ttl : 300 - name : \"another.example2.com.\" type : \"A\" ttl : 600 Can be transposed to: environment variables DDNSR53_CREDENTIALS_ACCESSKEYID=ABCDEFGHIJKLMNO123456 DDNSR53_CREDENTIALS_SECRETACCESSKEY=abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH DDNSR53_ROUTE53_HOSTEDZONEID=ABCEEFG123456789 DDNSR53_ROUTE53_RECORDSSET_0_NAME=ddns.example.com. DDNSR53_ROUTE53_RECORDSSET_0_TYPE=A DDNSR53_ROUTE53_RECORDSSET_0_TTL=300 DDNSR53_ROUTE53_RECORDSSET_1_NAME=ddns.example.com. DDNSR53_ROUTE53_RECORDSSET_1_TYPE=AAAA DDNSR53_ROUTE53_RECORDSSET_1_TTL=300 DDNSR53_ROUTE53_RECORDSSET_2_NAME=another.example2.com. DDNSR53_ROUTE53_RECORDSSET_2_TYPE=A DDNSR53_ROUTE53_RECORDSSET_2_TTL=600 Reference \u00b6 credentials route53","title":"Overview"},{"location":"config/#configuration","text":"","title":"Configuration"},{"location":"config/#overview","text":"There are two different ways to define configuration in ddns-route53: In a configuration file As environment variables These ways are evaluated in the order listed above. If no value was provided for a given option, a default value applies. Moreover, if an option has sub-options, and any of these sub-options is not specified, a default value will apply as well.","title":"Overview"},{"location":"config/#configuration-file","text":"At startup, ddns-route53 searches for a file named ddns-route53.yml (or ddns-route53.yaml ) in: /etc/ddns-route53/ $XDG_CONFIG_HOME/ $HOME/.config/ . (the working directory) You can override this using the --config flag or CONFIG env var . ddns-route53.yml credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hostedZoneID : \"ABCEEFG123456789\" recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 - name : \"ddns.example.com.\" type : \"AAAA\" ttl : 300 - name : \"another.example2.com.\" type : \"A\" ttl : 600","title":"Configuration file"},{"location":"config/#environment-variables","text":"All configuration from file can be transposed into environment variables. As an example, the following configuration: ddns-route53.yml credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hostedZoneID : \"ABCEEFG123456789\" recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 - name : \"ddns.example.com.\" type : \"AAAA\" ttl : 300 - name : \"another.example2.com.\" type : \"A\" ttl : 600 Can be transposed to: environment variables DDNSR53_CREDENTIALS_ACCESSKEYID=ABCDEFGHIJKLMNO123456 DDNSR53_CREDENTIALS_SECRETACCESSKEY=abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH DDNSR53_ROUTE53_HOSTEDZONEID=ABCEEFG123456789 DDNSR53_ROUTE53_RECORDSSET_0_NAME=ddns.example.com. DDNSR53_ROUTE53_RECORDSSET_0_TYPE=A DDNSR53_ROUTE53_RECORDSSET_0_TTL=300 DDNSR53_ROUTE53_RECORDSSET_1_NAME=ddns.example.com. DDNSR53_ROUTE53_RECORDSSET_1_TYPE=AAAA DDNSR53_ROUTE53_RECORDSSET_1_TTL=300 DDNSR53_ROUTE53_RECORDSSET_2_NAME=another.example2.com. DDNSR53_ROUTE53_RECORDSSET_2_TYPE=A DDNSR53_ROUTE53_RECORDSSET_2_TTL=600","title":"Environment variables"},{"location":"config/#reference","text":"credentials route53","title":"Reference"},{"location":"config/credentials/","text":"Credentials configuration \u00b6 AWS credentials are required for getting access and manage your Route53 zone. credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" accessKeyID \u00b6 AWS Access Key. Config file credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" Environment variables DDNSR53_CREDENTIALS_ACCESSKEYID AWS_ACCESS_KEY_ID (through AWS env provider) AWS_ACCESS_KEY (through AWS env provider) accessKeyIDFile \u00b6 Use content of secret file as AWS Access Key if accessKeyID not defined. Config file credentials : accessKeyIDFile : /run/secrets/akid Environment variables DDNSR53_CREDENTIALS_ACCESSKEYIDFILE secretAccessKey \u00b6 AWS Secret Key. Config file credentials : secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" Environment variables DDNSR53_CREDENTIALS_SECRETACCESSKEY AWS_SECRET_ACCESS_KEY (through AWS env provider) AWS_SECRET_KEY (through AWS env provider) secretAccessKeyFile \u00b6 Use content of secret file as AWS Secret Key if secretAccessKey not defined. Config file credentials : secretAccessKeyFile : /run/secrets/sak Environment variables DDNSR53_CREDENTIALS_SECRETACCESSKEYFILE","title":".credentials"},{"location":"config/credentials/#credentials-configuration","text":"AWS credentials are required for getting access and manage your Route53 zone. credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\"","title":"Credentials configuration"},{"location":"config/credentials/#accesskeyid","text":"AWS Access Key. Config file credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" Environment variables DDNSR53_CREDENTIALS_ACCESSKEYID AWS_ACCESS_KEY_ID (through AWS env provider) AWS_ACCESS_KEY (through AWS env provider)","title":"accessKeyID"},{"location":"config/credentials/#accesskeyidfile","text":"Use content of secret file as AWS Access Key if accessKeyID not defined. Config file credentials : accessKeyIDFile : /run/secrets/akid Environment variables DDNSR53_CREDENTIALS_ACCESSKEYIDFILE","title":"accessKeyIDFile"},{"location":"config/credentials/#secretaccesskey","text":"AWS Secret Key. Config file credentials : secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" Environment variables DDNSR53_CREDENTIALS_SECRETACCESSKEY AWS_SECRET_ACCESS_KEY (through AWS env provider) AWS_SECRET_KEY (through AWS env provider)","title":"secretAccessKey"},{"location":"config/credentials/#secretaccesskeyfile","text":"Use content of secret file as AWS Secret Key if secretAccessKey not defined. Config file credentials : secretAccessKeyFile : /run/secrets/sak Environment variables DDNSR53_CREDENTIALS_SECRETACCESSKEYFILE","title":"secretAccessKeyFile"},{"location":"config/route53/","text":"Route53 configuration \u00b6 hostedZoneID \u00b6 AWS Route53 hosted zone ID. Config file route53 : hostedZoneID : \"ABCEEFG123456789\" Environment variables DDNSR53_ROUTE53_HOSTEDZONEID recordsSet \u00b6 Slice of records set. route53 : recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 - name : \"ddns.example.com.\" type : \"AAAA\" ttl : 300 - name : \"another.example2.com.\" type : \"A\" ttl : 600 name \u00b6 AWS Route53 record set name. Warning Don't forget to suffix with a dot Config file route53 : recordsSet : - name : \"ddns.example.com.\" Environment variables DDNSR53_ROUTE53_RECORDSSET_<KEY>_NAME type \u00b6 AWS Route53 record set type. Can be A or AAAA . Config file route53 : recordsSet : - name : \"ddns.example.com.\" type : A Environment variables DDNSR53_ROUTE53_RECORDSSET_<KEY>_TYPE ttl \u00b6 AWS Route53 record TTL (time to live) in seconds. Config file route53 : recordsSet : - name : \"ddns.example.com.\" ttl : 300 Environment variables DDNSR53_ROUTE53_RECORDSSET_<KEY>_TTL","title":".route53"},{"location":"config/route53/#route53-configuration","text":"","title":"Route53 configuration"},{"location":"config/route53/#hostedzoneid","text":"AWS Route53 hosted zone ID. Config file route53 : hostedZoneID : \"ABCEEFG123456789\" Environment variables DDNSR53_ROUTE53_HOSTEDZONEID","title":"hostedZoneID"},{"location":"config/route53/#recordsset","text":"Slice of records set. route53 : recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 - name : \"ddns.example.com.\" type : \"AAAA\" ttl : 300 - name : \"another.example2.com.\" type : \"A\" ttl : 600","title":"recordsSet"},{"location":"config/route53/#name","text":"AWS Route53 record set name. Warning Don't forget to suffix with a dot Config file route53 : recordsSet : - name : \"ddns.example.com.\" Environment variables DDNSR53_ROUTE53_RECORDSSET_<KEY>_NAME","title":"name"},{"location":"config/route53/#type","text":"AWS Route53 record set type. Can be A or AAAA . Config file route53 : recordsSet : - name : \"ddns.example.com.\" type : A Environment variables DDNSR53_ROUTE53_RECORDSSET_<KEY>_TYPE","title":"type"},{"location":"config/route53/#ttl","text":"AWS Route53 record TTL (time to live) in seconds. Config file route53 : recordsSet : - name : \"ddns.example.com.\" ttl : 300 Environment variables DDNSR53_ROUTE53_RECORDSSET_<KEY>_TTL","title":"ttl"},{"location":"install/binary/","text":"Installation from binary \u00b6 Download \u00b6 ddns-route53 binaries are available on releases page. Choose the archive matching the destination platform: ddns-route53_2.8.0_darwin_arm64.tar.gz ddns-route53_2.8.0_darwin_amd64.tar.gz ddns-route53_2.8.0_freebsd_386.tar.gz ddns-route53_2.8.0_freebsd_amd64.tar.gz ddns-route53_2.8.0_linux_386.tar.gz ddns-route53_2.8.0_linux_amd64.tar.gz ddns-route53_2.8.0_linux_arm64.tar.gz ddns-route53_2.8.0_linux_armv5.tar.gz ddns-route53_2.8.0_linux_armv6.tar.gz ddns-route53_2.8.0_linux_armv7.tar.gz ddns-route53_2.8.0_linux_mips64le_hardfloat.tar.gz ddns-route53_2.8.0_linux_mips64le_softfloat.tar.gz ddns-route53_2.8.0_linux_mips64_hardfloat.tar.gz ddns-route53_2.8.0_linux_mips64_softfloat.tar.gz ddns-route53_2.8.0_linux_mipsle_hardfloat.tar.gz ddns-route53_2.8.0_linux_mipsle_softfloat.tar.gz ddns-route53_2.8.0_linux_mips_hardfloat.tar.gz ddns-route53_2.8.0_linux_mips_softfloat.tar.gz ddns-route53_2.8.0_linux_ppc64le.tar.gz ddns-route53_2.8.0_linux_riscv64.tar.gz ddns-route53_2.8.0_linux_s390x.tar.gz ddns-route53_2.8.0_windows_386.zip ddns-route53_2.8.0_windows_amd64.zip ddns-route53_2.8.0_windows_arm64.zip And extract ddns-route53: wget -qO- https://github.com/crazy-max/ddns-route53/releases/download/v2.8.0/ddns-route53_2.8.0_linux_amd64.tar.gz | tar -zxvf - ddns-route53 After getting the binary, it can be tested with ./ddns-route53 --help command and moved to a permanent location. Server configuration \u00b6 Steps below are the recommended server configuration. Prepare environment \u00b6 Create user to run ddns-route53 (ex. ddns-route53 ) groupadd ddns-route53 useradd -s /bin/false -d /bin/null -g ddns-route53 ddns-route53 Create required directory structure \u00b6 mkdir -p /var/lib/ddns-route53 chown ddns-route53:ddns-route53 /var/lib/ddns-route53/ chmod -R 750 /var/lib/ddns-route53/ mkdir /etc/ddns-route53 chown ddns-route53:ddns-route53 /etc/ddns-route53 chmod 770 /etc/ddns-route53 Configuration \u00b6 Create your first configuration file in /etc/ddns-route53/ddns-route53.yml and type: chown ddns-route53:ddns-route53 /etc/ddns-route53/ddns-route53.yml chmod 644 /etc/ddns-route53/ddns-route53.yml Copy binary to global location \u00b6 cp ddns-route53 /usr/local/bin/ddns-route53 Running ddns-route53 \u00b6 After the above steps, two options to run ddns-route53: 1. Creating a service file (recommended) \u00b6 See how to create Linux service to start ddns-route53 automatically. 2. Running from terminal \u00b6 /usr/local/bin/ddns-route53 \\ --config /etc/ddns-route53/ddns-route53.yml \\ --schedule \"*/30 * * * *\" Updating to a new version \u00b6 You can update to a new version of ddns-route53 by stopping it, replacing the binary at /usr/local/bin/ddns-route53 and restarting the instance. If you have carried out the installation steps as described above, the binary should have the generic name ddns-route53 . Do not change this, i.e. to include the version number.","title":"From binary"},{"location":"install/binary/#installation-from-binary","text":"","title":"Installation from binary"},{"location":"install/binary/#download","text":"ddns-route53 binaries are available on releases page. Choose the archive matching the destination platform: ddns-route53_2.8.0_darwin_arm64.tar.gz ddns-route53_2.8.0_darwin_amd64.tar.gz ddns-route53_2.8.0_freebsd_386.tar.gz ddns-route53_2.8.0_freebsd_amd64.tar.gz ddns-route53_2.8.0_linux_386.tar.gz ddns-route53_2.8.0_linux_amd64.tar.gz ddns-route53_2.8.0_linux_arm64.tar.gz ddns-route53_2.8.0_linux_armv5.tar.gz ddns-route53_2.8.0_linux_armv6.tar.gz ddns-route53_2.8.0_linux_armv7.tar.gz ddns-route53_2.8.0_linux_mips64le_hardfloat.tar.gz ddns-route53_2.8.0_linux_mips64le_softfloat.tar.gz ddns-route53_2.8.0_linux_mips64_hardfloat.tar.gz ddns-route53_2.8.0_linux_mips64_softfloat.tar.gz ddns-route53_2.8.0_linux_mipsle_hardfloat.tar.gz ddns-route53_2.8.0_linux_mipsle_softfloat.tar.gz ddns-route53_2.8.0_linux_mips_hardfloat.tar.gz ddns-route53_2.8.0_linux_mips_softfloat.tar.gz ddns-route53_2.8.0_linux_ppc64le.tar.gz ddns-route53_2.8.0_linux_riscv64.tar.gz ddns-route53_2.8.0_linux_s390x.tar.gz ddns-route53_2.8.0_windows_386.zip ddns-route53_2.8.0_windows_amd64.zip ddns-route53_2.8.0_windows_arm64.zip And extract ddns-route53: wget -qO- https://github.com/crazy-max/ddns-route53/releases/download/v2.8.0/ddns-route53_2.8.0_linux_amd64.tar.gz | tar -zxvf - ddns-route53 After getting the binary, it can be tested with ./ddns-route53 --help command and moved to a permanent location.","title":"Download"},{"location":"install/binary/#server-configuration","text":"Steps below are the recommended server configuration.","title":"Server configuration"},{"location":"install/binary/#prepare-environment","text":"Create user to run ddns-route53 (ex. ddns-route53 ) groupadd ddns-route53 useradd -s /bin/false -d /bin/null -g ddns-route53 ddns-route53","title":"Prepare environment"},{"location":"install/binary/#create-required-directory-structure","text":"mkdir -p /var/lib/ddns-route53 chown ddns-route53:ddns-route53 /var/lib/ddns-route53/ chmod -R 750 /var/lib/ddns-route53/ mkdir /etc/ddns-route53 chown ddns-route53:ddns-route53 /etc/ddns-route53 chmod 770 /etc/ddns-route53","title":"Create required directory structure"},{"location":"install/binary/#configuration","text":"Create your first configuration file in /etc/ddns-route53/ddns-route53.yml and type: chown ddns-route53:ddns-route53 /etc/ddns-route53/ddns-route53.yml chmod 644 /etc/ddns-route53/ddns-route53.yml","title":"Configuration"},{"location":"install/binary/#copy-binary-to-global-location","text":"cp ddns-route53 /usr/local/bin/ddns-route53","title":"Copy binary to global location"},{"location":"install/binary/#running-ddns-route53","text":"After the above steps, two options to run ddns-route53:","title":"Running ddns-route53"},{"location":"install/binary/#1-creating-a-service-file-recommended","text":"See how to create Linux service to start ddns-route53 automatically.","title":"1. Creating a service file (recommended)"},{"location":"install/binary/#2-running-from-terminal","text":"/usr/local/bin/ddns-route53 \\ --config /etc/ddns-route53/ddns-route53.yml \\ --schedule \"*/30 * * * *\"","title":"2. Running from terminal"},{"location":"install/binary/#updating-to-a-new-version","text":"You can update to a new version of ddns-route53 by stopping it, replacing the binary at /usr/local/bin/ddns-route53 and restarting the instance. If you have carried out the installation steps as described above, the binary should have the generic name ddns-route53 . Do not change this, i.e. to include the version number.","title":"Updating to a new version"},{"location":"install/docker/","text":"Installation with Docker \u00b6 About \u00b6 ddns-route53 provides automatically updated Docker images within several registries: Registry Image Docker Hub crazymax/ddns-route53 GitHub Container Registry ghcr.io/crazy-max/ddns-route53 It is possible to always use the latest stable tag or to use another service that handles updating Docker images. Note Want to be notified of new releases? Check out Diun (Docker Image Update Notifier) project! Following platforms for this image are available: $ docker run --rm mplatform/mquery crazymax/ddns-route53:latest Image: crazymax/ddns-route53:latest * Manifest List: Yes * Supported platforms: - linux/amd64 - linux/arm/v6 - linux/arm/v7 - linux/arm64 - linux/386 - linux/ppc64le This reference setup guides users through the setup based on docker-compose , but the installation of docker-compose is out of scope of this documentation. To install docker-compose itself, follow the official install instructions . Usage \u00b6 version : \"3.5\" services : ddns-route53 : image : crazymax/ddns-route53:latest container_name : ddns-route53 environment : - \"TZ=Europe/Paris\" - \"SCHEDULE=*/30 * * * *\" - \"LOG_LEVEL=info\" - \"LOG_JSON=false\" - \"DDNSR53_CREDENTIALS_ACCESSKEYID=ABCDEFGHIJKLMNO123456\" - \"DDNSR53_CREDENTIALS_SECRETACCESSKEY=abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" - \"DDNSR53_ROUTE53_HOSTEDZONEID=ABCEEFG123456789\" - \"DDNSR53_ROUTE53_RECORDSSET_0_NAME=ddns.example.com.\" - \"DDNSR53_ROUTE53_RECORDSSET_0_TYPE=A\" - \"DDNSR53_ROUTE53_RECORDSSET_0_TTL=300\" restart : always Edit this example with your preferences and run the following commands to bring up ddns-route53: docker-compose up -d docker-compose logs -f Or use the following command: docker run -d --name ddns-route53 \\ -e \"TZ=Europe/Paris\" \\ -e \"SCHEDULE=*/30 * * * *\" \\ -e \"LOG_LEVEL=info\" \\ -e \"LOG_JSON=false\" \\ -e \"DDNSR53_CREDENTIALS_ACCESSKEYID=ABCDEFGHIJKLMNO123456\" \\ -e \"DDNSR53_CREDENTIALS_SECRETACCESSKEY=abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" \\ -e \"DDNSR53_ROUTE53_HOSTEDZONEID=ABCEEFG123456789\" \\ -e \"DDNSR53_ROUTE53_RECORDSSET_0_NAME=ddns.example.com.\" \\ -e \"DDNSR53_ROUTE53_RECORDSSET_0_TYPE=A\" \\ -e \"DDNSR53_ROUTE53_RECORDSSET_0_TTL=300\" \\ crazymax/ddns-route53:latest To upgrade your installation to the latest release: docker-compose pull docker-compose up -d If you prefer to rely on the `configuration file instead of environment variables: # ./ddns-route53.yml credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hostedZoneID : \"ABCEEFG123456789\" recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 And your docker composition: version : \"3.5\" services : ddns-route53 : image : crazymax/ddns-route53:latest container_name : ddns-route53 volumes : - \"./ddns-route53.yml:/ddns-route53.yml:ro\" environment : - \"TZ=Europe/Paris\" - \"SCHEDULE=*/30 * * * *\" - \"LOG_LEVEL=info\" - \"LOG_JSON=false\" restart : always","title":"With Docker"},{"location":"install/docker/#installation-with-docker","text":"","title":"Installation with Docker"},{"location":"install/docker/#about","text":"ddns-route53 provides automatically updated Docker images within several registries: Registry Image Docker Hub crazymax/ddns-route53 GitHub Container Registry ghcr.io/crazy-max/ddns-route53 It is possible to always use the latest stable tag or to use another service that handles updating Docker images. Note Want to be notified of new releases? Check out Diun (Docker Image Update Notifier) project! Following platforms for this image are available: $ docker run --rm mplatform/mquery crazymax/ddns-route53:latest Image: crazymax/ddns-route53:latest * Manifest List: Yes * Supported platforms: - linux/amd64 - linux/arm/v6 - linux/arm/v7 - linux/arm64 - linux/386 - linux/ppc64le This reference setup guides users through the setup based on docker-compose , but the installation of docker-compose is out of scope of this documentation. To install docker-compose itself, follow the official install instructions .","title":"About"},{"location":"install/docker/#usage","text":"version : \"3.5\" services : ddns-route53 : image : crazymax/ddns-route53:latest container_name : ddns-route53 environment : - \"TZ=Europe/Paris\" - \"SCHEDULE=*/30 * * * *\" - \"LOG_LEVEL=info\" - \"LOG_JSON=false\" - \"DDNSR53_CREDENTIALS_ACCESSKEYID=ABCDEFGHIJKLMNO123456\" - \"DDNSR53_CREDENTIALS_SECRETACCESSKEY=abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" - \"DDNSR53_ROUTE53_HOSTEDZONEID=ABCEEFG123456789\" - \"DDNSR53_ROUTE53_RECORDSSET_0_NAME=ddns.example.com.\" - \"DDNSR53_ROUTE53_RECORDSSET_0_TYPE=A\" - \"DDNSR53_ROUTE53_RECORDSSET_0_TTL=300\" restart : always Edit this example with your preferences and run the following commands to bring up ddns-route53: docker-compose up -d docker-compose logs -f Or use the following command: docker run -d --name ddns-route53 \\ -e \"TZ=Europe/Paris\" \\ -e \"SCHEDULE=*/30 * * * *\" \\ -e \"LOG_LEVEL=info\" \\ -e \"LOG_JSON=false\" \\ -e \"DDNSR53_CREDENTIALS_ACCESSKEYID=ABCDEFGHIJKLMNO123456\" \\ -e \"DDNSR53_CREDENTIALS_SECRETACCESSKEY=abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" \\ -e \"DDNSR53_ROUTE53_HOSTEDZONEID=ABCEEFG123456789\" \\ -e \"DDNSR53_ROUTE53_RECORDSSET_0_NAME=ddns.example.com.\" \\ -e \"DDNSR53_ROUTE53_RECORDSSET_0_TYPE=A\" \\ -e \"DDNSR53_ROUTE53_RECORDSSET_0_TTL=300\" \\ crazymax/ddns-route53:latest To upgrade your installation to the latest release: docker-compose pull docker-compose up -d If you prefer to rely on the `configuration file instead of environment variables: # ./ddns-route53.yml credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hostedZoneID : \"ABCEEFG123456789\" recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 And your docker composition: version : \"3.5\" services : ddns-route53 : image : crazymax/ddns-route53:latest container_name : ddns-route53 volumes : - \"./ddns-route53.yml:/ddns-route53.yml:ro\" environment : - \"TZ=Europe/Paris\" - \"SCHEDULE=*/30 * * * *\" - \"LOG_LEVEL=info\" - \"LOG_JSON=false\" restart : always","title":"Usage"},{"location":"install/linux-service/","text":"Run as service on Debian based distro \u00b6 Using systemd \u00b6 Warning Make sure to follow the instructions to install from binary before. To create a new service, paste this content in /etc/systemd/system/ddns-route53.service : [Unit] Description=ddns-route53 Documentation=https://crazymax.dev/ddns-route53/ After=syslog.target After=network.target [Service] RestartSec=2s Type=simple User=ddns-route53 Group=ddns-route53 ExecStart=/usr/local/bin/ddns-route53 --config /etc/ddns-route53/ddns-route53.yml Restart=always #Environment=TZ=Europe/Paris #Environment=AWS_ACCESS_KEY_ID=******** #Environment=AWS_SECRET_ACCESS_KEY=******** Environment=SCHEDULE=\"*/30 * * * *\" [Install] WantedBy=multi-user.target Change the user, group, and other required startup values following your needs. Enable and start ddns-route53 at boot: sudo systemctl enable ddns-route53 sudo systemctl start ddns-route53 To view logs: journalctl -fu ddns-route53.service","title":"Linux service"},{"location":"install/linux-service/#run-as-service-on-debian-based-distro","text":"","title":"Run as service on Debian based distro"},{"location":"install/linux-service/#using-systemd","text":"Warning Make sure to follow the instructions to install from binary before. To create a new service, paste this content in /etc/systemd/system/ddns-route53.service : [Unit] Description=ddns-route53 Documentation=https://crazymax.dev/ddns-route53/ After=syslog.target After=network.target [Service] RestartSec=2s Type=simple User=ddns-route53 Group=ddns-route53 ExecStart=/usr/local/bin/ddns-route53 --config /etc/ddns-route53/ddns-route53.yml Restart=always #Environment=TZ=Europe/Paris #Environment=AWS_ACCESS_KEY_ID=******** #Environment=AWS_SECRET_ACCESS_KEY=******** Environment=SCHEDULE=\"*/30 * * * *\" [Install] WantedBy=multi-user.target Change the user, group, and other required startup values following your needs. Enable and start ddns-route53 at boot: sudo systemctl enable ddns-route53 sudo systemctl start ddns-route53 To view logs: journalctl -fu ddns-route53.service","title":"Using systemd"},{"location":"install/unifi-os/","text":"Installing on UniFi OS-based devices \u00b6 This guide is for devices running UniFi OS such as: UDM UDM Pro Install on-boot-script \u00b6 Follow the guide . Create the config file \u00b6 Create the config directory. mkdir /mnt/data/ddns-route53 Create your ddns-route53.yml configuration file and save it as /mnt/data/ddns-route53/ddns-route53.yml . Fix the permissions of the config file. chown 1000 :1000 /mnt/data/ddns-route53/ddns-route53.yml Setup the service \u00b6 Copy the following configuration and save it to /mnt/data/on_boot.d/20-ddns-route53.sh . Be sure to change the TZ=America/Vancouver line to your own timezone. #!/bin/sh CNI_PATH = /mnt/data/podman/cni if [ ! -f \" $CNI_PATH \" /macvlan ] ; then mkdir -p $CNI_PATH curl -L https://github.com/containernetworking/plugins/releases/download/v0.8.6/cni-plugins-linux-arm64-v0.8.6.tgz | tar -xz -C $CNI_PATH fi mkdir -p /opt/cni rm -f /opt/cni/bin ln -s $CNI_PATH /opt/cni/bin for file in \" $CNI_PATH \" /*.conflist do if [ -f \" $file \" ] ; then link_path = \"/etc/cni/net.d/ $( basename \" $file \" ) \" rm -f \" $link_path \" ln -s \" $file \" \" $link_path \" fi done podman run -d --restart always \\ --name ddns-route53 \\ --hostname ddns-route53 \\ -v \"/mnt/data/ddns-route53/ddns-route53.yml:/ddns-route53.yml:ro\" \\ -e \"TZ=America/Vancouver\" \\ -e \"SCHEDULE=*/30 * * * *\" \\ -e \"LOG_LEVEL=info\" \\ -e \"LOG_JSON=false\" \\ docker.io/crazymax/ddns-route53:latest Make the script executable. chmod +x /mnt/data/on_boot.d/20-ddns-route53.sh Start the service \u00b6 Start the service. /mnt/data/on_boot.d/20-ddns-route53.sh The next time the device restarts the service will automatically start. Checking the logs \u00b6 Check the logs with podman. podman logs ddns-route53","title":"UniFi OS device"},{"location":"install/unifi-os/#installing-on-unifi-os-based-devices","text":"This guide is for devices running UniFi OS such as: UDM UDM Pro","title":"Installing on UniFi OS-based devices"},{"location":"install/unifi-os/#install-on-boot-script","text":"Follow the guide .","title":"Install on-boot-script"},{"location":"install/unifi-os/#create-the-config-file","text":"Create the config directory. mkdir /mnt/data/ddns-route53 Create your ddns-route53.yml configuration file and save it as /mnt/data/ddns-route53/ddns-route53.yml . Fix the permissions of the config file. chown 1000 :1000 /mnt/data/ddns-route53/ddns-route53.yml","title":"Create the config file"},{"location":"install/unifi-os/#setup-the-service","text":"Copy the following configuration and save it to /mnt/data/on_boot.d/20-ddns-route53.sh . Be sure to change the TZ=America/Vancouver line to your own timezone. #!/bin/sh CNI_PATH = /mnt/data/podman/cni if [ ! -f \" $CNI_PATH \" /macvlan ] ; then mkdir -p $CNI_PATH curl -L https://github.com/containernetworking/plugins/releases/download/v0.8.6/cni-plugins-linux-arm64-v0.8.6.tgz | tar -xz -C $CNI_PATH fi mkdir -p /opt/cni rm -f /opt/cni/bin ln -s $CNI_PATH /opt/cni/bin for file in \" $CNI_PATH \" /*.conflist do if [ -f \" $file \" ] ; then link_path = \"/etc/cni/net.d/ $( basename \" $file \" ) \" rm -f \" $link_path \" ln -s \" $file \" \" $link_path \" fi done podman run -d --restart always \\ --name ddns-route53 \\ --hostname ddns-route53 \\ -v \"/mnt/data/ddns-route53/ddns-route53.yml:/ddns-route53.yml:ro\" \\ -e \"TZ=America/Vancouver\" \\ -e \"SCHEDULE=*/30 * * * *\" \\ -e \"LOG_LEVEL=info\" \\ -e \"LOG_JSON=false\" \\ docker.io/crazymax/ddns-route53:latest Make the script executable. chmod +x /mnt/data/on_boot.d/20-ddns-route53.sh","title":"Setup the service"},{"location":"install/unifi-os/#start-the-service","text":"Start the service. /mnt/data/on_boot.d/20-ddns-route53.sh The next time the device restarts the service will automatically start.","title":"Start the service"},{"location":"install/unifi-os/#checking-the-logs","text":"Check the logs with podman. podman logs ddns-route53","title":"Checking the logs"},{"location":"install/unifi/","text":"Installing on a VyOS-based UniFi Gateway Devices \u00b6 This guide is for devices running VyOS such as: USG 3P USG Pro 4 Install the binary \u00b6 Determine which architecture the USG is using: uname -a Determine if the USG is using softfloat or hardfloat optimizations: readelf -A /bin/sh | grep ABI_FP Tip To ensure that ddns-route53 persists across reboots, it should be stored in the /config/scripts directory. Install the ddns-route53 binary that matches the reported architecture and float type by following the install from binary instructions. Now you have to create your ddns-route53.yml configuration file in /config/scripts/ddns-route53.yml On the Cloud Key/Controller \u00b6 Find the UniFi base path \u00b6 By default, the paths are as follows: UniFi Cloud Key: /srv/unifi Debian/Ubuntu Linux: /usr/lib/unifi Windows: %USERPROFILE%/Ubiquiti UniFi macOS: ~/Library/Application Support/UniFi Create a config.gateway.json \u00b6 Create a file called config.gateway.json in your <unifi_base>/data/sites/<site_id> directory with the following contents: { \"system\" : { \"task-scheduler\" : { \"task\" : { \"dnsupdate\" : { \"executable\" : { \"path\" : \"/config/scripts/ddns-route53 --config /config/scripts/ddns-route53.yml\" }, \"interval\" : \"1m\" } } } } } Tip The interval field sets how often ddns-route53 will run (e.g. 1 minute). Info See UniFi - USG advanced configuration using config.gateway.json for more information. Trigger a provision for the USG \u00b6 See How to trigger a provision for instructions.","title":"UniFi (VyOS) device"},{"location":"install/unifi/#installing-on-a-vyos-based-unifi-gateway-devices","text":"This guide is for devices running VyOS such as: USG 3P USG Pro 4","title":"Installing on a VyOS-based UniFi Gateway Devices"},{"location":"install/unifi/#install-the-binary","text":"Determine which architecture the USG is using: uname -a Determine if the USG is using softfloat or hardfloat optimizations: readelf -A /bin/sh | grep ABI_FP Tip To ensure that ddns-route53 persists across reboots, it should be stored in the /config/scripts directory. Install the ddns-route53 binary that matches the reported architecture and float type by following the install from binary instructions. Now you have to create your ddns-route53.yml configuration file in /config/scripts/ddns-route53.yml","title":"Install the binary"},{"location":"install/unifi/#on-the-cloud-keycontroller","text":"","title":"On the Cloud Key/Controller"},{"location":"install/unifi/#find-the-unifi-base-path","text":"By default, the paths are as follows: UniFi Cloud Key: /srv/unifi Debian/Ubuntu Linux: /usr/lib/unifi Windows: %USERPROFILE%/Ubiquiti UniFi macOS: ~/Library/Application Support/UniFi","title":"Find the UniFi base path"},{"location":"install/unifi/#create-a-configgatewayjson","text":"Create a file called config.gateway.json in your <unifi_base>/data/sites/<site_id> directory with the following contents: { \"system\" : { \"task-scheduler\" : { \"task\" : { \"dnsupdate\" : { \"executable\" : { \"path\" : \"/config/scripts/ddns-route53 --config /config/scripts/ddns-route53.yml\" }, \"interval\" : \"1m\" } } } } } Tip The interval field sets how often ddns-route53 will run (e.g. 1 minute). Info See UniFi - USG advanced configuration using config.gateway.json for more information.","title":"Create a config.gateway.json"},{"location":"install/unifi/#trigger-a-provision-for-the-usg","text":"See How to trigger a provision for instructions.","title":"Trigger a provision for the USG"},{"location":"migration/v1-to-v2/","text":"ddns-route53 v1 to v2 \u00b6 Configuration transposed into environment variables \u00b6 All configuration is now transposed into environment variables. Take a look at the documentation for more details. AWS_HOSTED_ZONE_ID env var has been renamed DDNSR53_ROUTE53_HOSTEDZONEID to follow environment variables transposition. All fields in configuration are now camelCased \u00b6 In order to enable transposition into environmental variables, all fields in configuration are now camelCased : credentials.access_key_id > credentials.accessKeyID credentials.secret_access_key > credentials.secretAccessKey route53.hosted_zone_id > route53.hostedZoneID ... v1 credentials : access_key_id : \"ABCDEFGHIJKLMNO123456\" secret_access_key : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hosted_zone_id : \"ABCEEFG123456789\" records_set : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 - name : \"ddns.example.com.\" type : \"AAAA\" ttl : 300 - name : \"another.example2.com.\" type : \"A\" ttl : 600 v2 credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hostedZoneID : \"ABCEEFG123456789\" recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 - name : \"ddns.example.com.\" type : \"AAAA\" ttl : 300 - name : \"another.example2.com.\" type : \"A\" ttl : 600","title":"ddns-route53 v1 to v2"},{"location":"migration/v1-to-v2/#ddns-route53-v1-to-v2","text":"","title":"ddns-route53 v1 to v2"},{"location":"migration/v1-to-v2/#configuration-transposed-into-environment-variables","text":"All configuration is now transposed into environment variables. Take a look at the documentation for more details. AWS_HOSTED_ZONE_ID env var has been renamed DDNSR53_ROUTE53_HOSTEDZONEID to follow environment variables transposition.","title":"Configuration transposed into environment variables"},{"location":"migration/v1-to-v2/#all-fields-in-configuration-are-now-camelcased","text":"In order to enable transposition into environmental variables, all fields in configuration are now camelCased : credentials.access_key_id > credentials.accessKeyID credentials.secret_access_key > credentials.secretAccessKey route53.hosted_zone_id > route53.hostedZoneID ... v1 credentials : access_key_id : \"ABCDEFGHIJKLMNO123456\" secret_access_key : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hosted_zone_id : \"ABCEEFG123456789\" records_set : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 - name : \"ddns.example.com.\" type : \"AAAA\" ttl : 300 - name : \"another.example2.com.\" type : \"A\" ttl : 600 v2 credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hostedZoneID : \"ABCEEFG123456789\" recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 - name : \"ddns.example.com.\" type : \"AAAA\" ttl : 300 - name : \"another.example2.com.\" type : \"A\" ttl : 600","title":"All fields in configuration are now camelCased"},{"location":"usage/basic-example/","text":"Basic example \u00b6 In this section we quickly go over a basic way to run ddns-route53. Setup \u00b6 Warning Make sure to follow the instructions to install from binary before. First create a ddns-route53.yml configuration file like this one: # ./ddns-route53.yml credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hostedZoneID : \"ABCEEFG123456789\" recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 That's it. Now you can launch ddns-route53 with the following command: ddns-route53 --config ./ddns-route53.yml --schedule \"*/30 * * * *\"","title":"Basic example"},{"location":"usage/basic-example/#basic-example","text":"In this section we quickly go over a basic way to run ddns-route53.","title":"Basic example"},{"location":"usage/basic-example/#setup","text":"Warning Make sure to follow the instructions to install from binary before. First create a ddns-route53.yml configuration file like this one: # ./ddns-route53.yml credentials : accessKeyID : \"ABCDEFGHIJKLMNO123456\" secretAccessKey : \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" route53 : hostedZoneID : \"ABCEEFG123456789\" recordsSet : - name : \"ddns.example.com.\" type : \"A\" ttl : 300 That's it. Now you can launch ddns-route53 with the following command: ddns-route53 --config ./ddns-route53.yml --schedule \"*/30 * * * *\"","title":"Setup"},{"location":"usage/cli/","text":"Command Line \u00b6 Usage \u00b6 ddns-route53 [ options ] Options \u00b6 $ ddns-route53 --help Usage: ddns-route53 Dynamic DNS for Amazon Route 53 on a time-based schedule. More info: https://github.com/crazy-max/ddns-route53 Flags: -h, --help Show context-sensitive help. --version --config=STRING ddns-route53 configuration file ($CONFIG). --schedule=STRING CRON expression format ($SCHEDULE). --max-retries=3 Number of retries in case of WAN IP retrieval failure ($MAX_RETRIES). --log-level=\"info\" Set log level ($LOG_LEVEL). --log-json Enable JSON logging output ($LOG_JSON). --log-caller Add file:line of the caller to log output ($LOG_CALLER). --log-nocolor Disables the colorized output ($LOG_NOCOLOR). Environment variables \u00b6 Following environment variables can be used in place: Name Default Description CONFIG ddns-route53 configuration file SCHEDULE CRON expression to schedule ddns-route53 LOG_LEVEL info Log level output LOG_JSON false Enable JSON logging output LOG_CALLER false Enable to add file:line of the caller LOG_NOCOLOR false Disables the colorized output","title":"Command line"},{"location":"usage/cli/#command-line","text":"","title":"Command Line"},{"location":"usage/cli/#usage","text":"ddns-route53 [ options ]","title":"Usage"},{"location":"usage/cli/#options","text":"$ ddns-route53 --help Usage: ddns-route53 Dynamic DNS for Amazon Route 53 on a time-based schedule. More info: https://github.com/crazy-max/ddns-route53 Flags: -h, --help Show context-sensitive help. --version --config=STRING ddns-route53 configuration file ($CONFIG). --schedule=STRING CRON expression format ($SCHEDULE). --max-retries=3 Number of retries in case of WAN IP retrieval failure ($MAX_RETRIES). --log-level=\"info\" Set log level ($LOG_LEVEL). --log-json Enable JSON logging output ($LOG_JSON). --log-caller Add file:line of the caller to log output ($LOG_CALLER). --log-nocolor Disables the colorized output ($LOG_NOCOLOR).","title":"Options"},{"location":"usage/cli/#environment-variables","text":"Following environment variables can be used in place: Name Default Description CONFIG ddns-route53 configuration file SCHEDULE CRON expression to schedule ddns-route53 LOG_LEVEL info Log level output LOG_JSON false Enable JSON logging output LOG_CALLER false Enable to add file:line of the caller LOG_NOCOLOR false Disables the colorized output","title":"Environment variables"},{"location":"usage/prerequisites/","text":"Prerequisites \u00b6 I assume you have already created a Route 53 Hosted Zones as a Public Hosted Zone type and setted Amazon name servers in your domain name registrar. Go to the IAM Policies page and click on Create Policy . Then click on JSON tab and paste the following content : { \"Version\" : \"2012-10-17\" , \"Statement\" : [ { \"Action\" : [ \"route53:ChangeResourceRecordSets\" ], \"Effect\" : \"Allow\" , \"Resource\" : \"arn:aws:route53:::hostedzone/<HOSTED_ZONE_ID>\" } ] } Tip Replace <HOSTED_ZONE_ID> with your current hosted zone id you can find on Route 53 Hosted Zones page . Enter a Policy Name and click Create Policy . Now go to the IAM Users page and click the Add user button. Enter a User name , check Programmatic access for Access type and click Next: Permissions . Choose the last option Attach existing policies directly and fill in the Search field with the name of the policy you created before and click Next: Review then Create user . An Access Key ID and a Secret Access key will be displayed. This is the credentials needed for ddns-route53. Save them somewhere since you will need them in the configuration step.","title":"Prerequisites"},{"location":"usage/prerequisites/#prerequisites","text":"I assume you have already created a Route 53 Hosted Zones as a Public Hosted Zone type and setted Amazon name servers in your domain name registrar. Go to the IAM Policies page and click on Create Policy . Then click on JSON tab and paste the following content : { \"Version\" : \"2012-10-17\" , \"Statement\" : [ { \"Action\" : [ \"route53:ChangeResourceRecordSets\" ], \"Effect\" : \"Allow\" , \"Resource\" : \"arn:aws:route53:::hostedzone/<HOSTED_ZONE_ID>\" } ] } Tip Replace <HOSTED_ZONE_ID> with your current hosted zone id you can find on Route 53 Hosted Zones page . Enter a Policy Name and click Create Policy . Now go to the IAM Users page and click the Add user button. Enter a User name , check Programmatic access for Access type and click Next: Permissions . Choose the last option Attach existing policies directly and fill in the Search field with the name of the policy you created before and click Next: Review then Create user . An Access Key ID and a Secret Access key will be displayed. This is the credentials needed for ddns-route53. Save them somewhere since you will need them in the configuration step.","title":"Prerequisites"}]}